package com.example.officeapp

import android.content.Intent
import android.os.Bundle
import android.util.Log
import android.widget.Button
import android.widget.ImageView
import android.widget.TextView
import androidx.activity.enableEdgeToEdge
import androidx.appcompat.app.AppCompatActivity


class PenDesc : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        Log.d("DEBUG", "PenDesc.onCreate() вызван")
        enableEdgeToEdge()
        setContentView(R.layout.activity_pen_desc)
        Log.d("DEBUG", "Layout установлен: activity_pen_desc")

        // Находим все элементы из activity_pen_desc.xml
        val name: TextView = findViewById(R.id.pen_name)
        val price: TextView = findViewById(R.id.pen_price)
        val quantity: TextView = findViewById(R.id.pen_quantity)
        val imageView: ImageView = findViewById(R.id.pen_image)

        // Устанавливаем данные
        name.text = intent.getStringExtra("penName")
        price.text = intent.getStringExtra("penPrice")
        quantity.text = intent.getStringExtra("penQuantity")

        // Устанавливаем изображение
        val imageId = intent.getIntExtra("penImageId", 0)
        if (imageId != 0) {
            imageView.setImageResource(imageId)
            Log.d("DEBUG", "Изображение установлено с ID: $imageId")
        } else {
            Log.d("DEBUG", "ID изображения не получен")
            // Установите изображение по умолчанию
            imageView.setImageResource(R.drawable.p_default)
        }

        val vector_back: ImageView = findViewById(R.id.vector_back)
        vector_back.setOnClickListener {
            val intent = Intent(this, PenActivity::class.java)
            startActivity(intent)
        }

        val button_buy: Button = findViewById(R.id.button_buy)
        button_buy.setOnClickListener {
            val intent = Intent(this, BuyActivity::class.java)
            startActivity(intent)
        }
    }

    private fun openBuyActivity(name: String, price: String, imageId: Int) {
        val intent = Intent(this, BuyActivity::class.java).apply {
            putExtra("productName", name)
            putExtra("productPrice", price)
            putExtra("productImageId", imageId)
        }
        startActivity(intent)
    }
}
